{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "http://indiaprotocol.com/v1/search/party/PartySearch.json",
  "type": "object",
  "title": "The Party Search Response schema",
  "description": "The Party Search Response returned for a party search query.",
  "required": [
    "meta",
    "data"
  ],
  "properties": {
    "meta": {
      "$id": "#/properties/meta",
      "type": "object",
      "title": "The meta schema",
      "description": "An explanation about the purpose of this instance.",
      "required": [
        "q",
        "page",
        "per_page",
        "total_records",
        "time_ms",
        "facets"
      ],
      "properties": {
        "q": {
          "description": "Generic search paramter for party search",
          "example": "crediwatch",
          "title": "Query paramter",
          "type": "string"
        },
        "page": {
          "default": 1,
          "description": "The paramter is used for pagination of results",
          "example": 1,
          "title": "Page number",
          "type": "integer"
        },
        "per_page": {
          "default": 10,
          "description": "Number of documents returned per page",
          "example": 10,
          "title": "Documents per page",
          "type": "integer"
        },
        "total_records": {
          "description": "Total records present in for the search paramter",
          "example": 10000,
          "title": "Total number of records",
          "type": "integer"
        },
        "time_ms": {
          "description": "Time taken to return the results",
          "example": 136,
          "title": "Response time",
          "type": "number"
        },
        "facets": {
          "description": "Faceted query for the query paramter",
          "required": [],
          "title": "Different dimensions of the data",
          "type": "object",
          "properties": {
            "city": {
              "description": "Distribution of parties across different cities",
              "title": "Distribution across cities",
              "type": "object",
              "properties": {
                "doc_count_error_upper_bound": {
                  "$id": "#/properties/meta/properties/facets/properties/city/properties/doc_count_error_upper_bound",
                  "type": "integer",
                  "title": "The doc_count_error_upper_bound schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": 0,
                  "example": 0
                },
                "sum_other_doc_count": {
                  "default": 0,
                  "description": "Total number of documents for this facet",
                  "example": 1994,
                  "title": "Total number of documents",
                  "type": "integer"
                },
                "buckets": {
                  "description": "Results of facets query",
                  "title": "Facets result",
                  "type": "array",
                  "additionalItems": true,
                  "items": {
                    "type": "object",
                    "title": "The first anyOf schema",
                    "description": "An explanation about the purpose of this instance.",
                    "required": [
                      "key",
                      "doc_count"
                    ],
                    "properties": {
                      "key": {
                        "default": "",
                        "description": "Name of the city",
                        "example": "bangalore",
                        "title": "City Name",
                        "type": "string"
                      },
                      "doc_count": {
                        "default": 0,
                        "description": "Total number of documents for the city",
                        "example": 620,
                        "title": "Document count",
                        "type": "integer"
                      }
                    }
                  }
                }
              }
            },
            "model_type": {
              "description": "Facet query on the type of the party distribution Ex: Private company, person, LLP, Public company etc..",
              "required": [
                "doc_count_error_upper_bound",
                "sum_other_doc_count",
                "buckets"
              ],
              "title": "Party Distribution",
              "type": "object",
              "properties": {
                "doc_count_error_upper_bound": {
                  "$id": "#/properties/meta/properties/facets/properties/model_type/properties/doc_count_error_upper_bound",
                  "type": "integer",
                  "title": "The doc_count_error_upper_bound schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": 0,
                  "example": 0
                },
                "sum_other_doc_count": {
                  "default": 0,
                  "description": "Total number of documents for this facet",
                  "example": 19,
                  "title": "Total number of documents",
                  "type": "integer"
                },
                "buckets": {
                  "default": [],
                  "description": "Results of facets query",
                  "title": "Facets result",
                  "type": "array",
                  "additionalItems": true,
                  "items": {
                    "$id": "#/properties/meta/properties/facets/properties/model_type/properties/buckets/items/anyOf/0",
                    "type": "object",
                    "title": "The first anyOf schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": {},
                    "example": {
                      "key": "person",
                      "doc_count": 169627
                    },
                    "required": [
                      "key",
                      "doc_count"
                    ],
                    "properties": {
                      "key": {
                        "default": "",
                        "description": "Model type",
                        "example": "person",
                        "title": "Model type",
                        "type": "string"
                      },
                      "doc_count": {
                        "$id": "#/properties/meta/properties/facets/properties/model_type/properties/buckets/items/anyOf/0/properties/doc_count",
                        "type": "integer",
                        "title": "The doc_count schema",
                        "description": "An explanation about the purpose of this instance.",
                        "default": 0,
                        "example": 169627
                      }
                    }
                  }
                }
              }
            },
            "status": {
              "default": {},
              "description": "Companies status",
              "required": [
                "doc_count_error_upper_bound",
                "sum_other_doc_count",
                "buckets"
              ],
              "title": "Company status",
              "type": "object",
              "properties": {
                "doc_count_error_upper_bound": {
                  "$id": "#/properties/meta/properties/facets/properties/status/properties/doc_count_error_upper_bound",
                  "type": "integer",
                  "title": "The doc_count_error_upper_bound schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": 0,
                  "example": 0
                },
                "sum_other_doc_count": {
                  "default": 0,
                  "description": "Total number of documents for this facet",
                  "example": 90,
                  "title": "Total number of documents",
                  "type": "integer"
                },
                "buckets": {
                  "default": [],
                  "description": "Results of facets query",
                  "example": [
                    {
                      "key": "active",
                      "doc_count": 51051
                    },
                    {
                      "key": "Strike Off",
                      "doc_count": 16352
                    }
                  ],
                  "title": "Facets result",
                  "type": "array",
                  "additionalItems": true,
                  "items": {
                    "$id": "#/properties/meta/properties/facets/properties/status/properties/buckets/items/anyOf/0",
                    "type": "object",
                    "title": "The first anyOf schema",
                    "description": "An explanation about the purpose of this instance.",
                    "default": {},
                    "example": {
                      "key": "active",
                      "doc_count": 51051
                    },
                    "required": [
                      "key",
                      "doc_count"
                    ],
                    "properties": {
                      "key": {
                        "default": "",
                        "description": "Companies state",
                        "example": "active",
                        "title": "Comapnies state",
                        "type": "string"
                      },
                      "doc_count": {
                        "default": 0,
                        "description": "Total number of documents",
                        "example": 51051,
                        "title": "Total number of documents",
                        "type": "integer"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "data": {
      "$id": "#/properties/data",
      "description": "Results of the Party search query",
      "title": "Party Search results",
      "type": "array",
      "additionalItems": true,
      "items": {
        "$ref": "https://bitbucket.org/crediwatch/indiaprotocol/raw/edcfe67b6cb1aeacf2c4ba9f19ac449cf303ad3f/protocol/v1/party/Party.json"
      }
    }
  }
}